# 문제 3

사내에서 쓰이는 BO(Back office) 서비스를 개발하려고 합니다.

1. 로그인방식인 OAuth와 JWT 둘중에 어느것을 사용하여 개발을 하실건가요?  
JWT를 사용하여 개발하도록 하겠습니다.
  
2. 둘중 선택한 이유와 장점에 대해 설명해주세요  
BO 서비스는 내부 시스템이고, 비교적 서비스 규모가 작기 때문에 OAuth보다 JWT가 적합하다고 생각합니다.  
  
- 보안 측면  
JWT는 비밀키로 서명된 토큰을 통해 서버와 클라이언트가 정보를 주고 받습니다.  
이 토큰은 변조를 방지하고, 토큰 자체에 인증 정보가 담겨 있어서 안정성이 보장됩니다.  
  
- 독립적인 측면  
OAuth와 같은 외부 서버에 의존하여 개발할 시, 서버에 장애가 발생할 경우 외부 서버에서 해결되기 전까지 직접 해결하기 힘들다는 점이 있습니다.  
반면에 JWT로 구현 시 내부적으로 인증을 처리하기 때문에 장애가 발생하더라도 서버 측에서 빠르게 디버깅을 통해 조치할 수 있다는 장점이 있습니다.  
  
- 성능 측면  
JWT는 세션을 저장하지 않고 클라이언트가 상태 정보를 토큰에 포함하여 서버와 통신합니다.  
이를 통해 서버 측에서 상태를 저장할 필요가 없어 서버의 부담을 줄여 성능을 향상시킬 수 있습니다.
  
- 구현 측면  
OAuth에 비해 설정과 구현이 비교적 간단하기 때문에 작은 규모의 BO 서비스에서 더욱 적합합니다.

3. 구현 방법을 서술해 주세요 (다이어그램등을 활용하셔서 첨부하셔도 좋습니다)  
- 사용자 로그인 요청  
1. 사용자가 로그인 폼에 아이디와 비밀번호를 입력하고 로그인 요청을 서버로 보냄
2. 서버는 DB에서 해당 사용자의 정보를 조회하고, 입력된 비밀번호를 검증
  
- JWT 토큰 생성 및 응답  
1. 사용자의 인증 정보가 올바르면, 서버에서 Access Token과 Refresh Token 토큰을 생성  
 - Access Token (만료 시간 15-60분), Refresh Token (만료 시간 1-2주)  
 - Access Token에 'userId', 'roles' 등의 정보를 포함시킴  
2. Access Token은 HTTP 응답 Body에 포함하여 클라이언트에 전달  
3. Refresh Token은 보안을 위해 HttpOnly Cookie에 저장  
4. 사용자의 인증 정보 검증이 실패하면, 401 Unauthorized 에러 반환
  
- 클라이언트의 요청에 JWT 토큰 포함  
1. 클라이언트가 서버에 API 요청을 보낼 때 Autorization: Bearer <JWT-TOKEN> 형식으로 JWT를 포함시켜 보냄  
  
- 서버에서 JWT 검증  
1. 서버가 클라이언트로부터 받은 JWT 토큰을 비밀키를 이용해 검증 후, 유효할 시 요청 처리
2. 유효하지 않은 토큰일 땐 401 Unauthorized 예외 반환  
  
- 토큰 만료 처리  
1. Access Token의 만료 시간이 지나면, 클라이언트는 Refresh Token을 사용해서 서버에 새로운 Access Token 요청  
2. 서버가 Refresh Token을 검증하교 유효할 시, 새로운 Access Token을 발급해서 반환  
3. Refresh Token도 만료되었으면 다시 로그인  
  
인증 흐름 예시 다이어그램  
![ERD Diagram](./assets/diagrams/Solve3-ERD-diagram.png)

---

### 💡 추가질문 - 실제로 구현해본 경험이 있다면, 해당 구현 경험을 서술해주세요
